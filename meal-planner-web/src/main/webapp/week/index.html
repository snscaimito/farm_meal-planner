<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<title>Meal Plan for Week</title>
	<link rel="stylesheet" href="/css/main.css"/>
	<script src="/js/jquery-3.2.1.min.js"></script>
	<script src="/js/js.cookie-2.1.4.js"></script>
</head>

<body>
    <h1>Meal Plan for Week</h1>
        
    <div id="week">
        <div id="monday" class="evenColumn">
            <span>Monday</span>
            <div class="daySchedule">
                <div class="mealEvent"><span>Breakfast</span></div>
                <div class="mealEvent"><span>Lunch</span></div>
                <div class="mealEvent"><span>Dinner</span></div>
            </div>
        </div>
        <div id="tuesday" class="oddColumn">
            <span>Tuesday</span>
            <div class="daySchedule">
                <div class="mealEvent"><span>Breakfast</span></div>
                <div class="mealEvent"><span>Lunch</span></div>
                <div class="mealEvent"><span>Dinner</span></div>
            </div>
        </div>
        <div id="wednesday" class="evenColumn">
            <span>Wednesday</span>
            <div class="daySchedule">
                <div class="mealEvent"><span>Breakfast</span></div>
                <div class="mealEvent"><span>Lunch</span></div>
                <div class="mealEvent"><span>Dinner</span></div>
            </div>
        </div>
        <div id="thursday" class="oddColumn">
            <span>Thursday</span>
            <div class="daySchedule">
                <div class="mealEvent"><span>Breakfast</span></div>
                <div class="mealEvent"><span>Lunch</span></div>
                <div class="mealEvent"><span>Dinner</span></div>
            </div>
        </div>
        <div id="friday" class="evenColumn">
            <span>Friday</span>
            <div class="daySchedule">
                <div class="mealEvent"><span>Breakfast</span></div>
                <div class="mealEvent"><span>Lunch</span></div>
                <div class="mealEvent"><span>Dinner</span></div>
            </div>
        </div>
        <div id="saturday" class="oddColumn">
            <span>Saturday</span>
            <div class="daySchedule">
                <div class="mealEvent"><span>Breakfast</span></div>
                <div class="mealEvent"><span>Lunch</span></div>
                <div class="mealEvent"><span>Dinner</span></div>
            </div>
        </div>
        <div id="sunday" class="evenColumn">
            <span>Sunday</span>
            <div class="daySchedule">
                <div class="mealEvent"><span>Breakfast</span></div>
                <div class="mealEvent"><span>Lunch</span></div>
                <div class="mealEvent"><span>Dinner</span></div>
            </div>
        </div>
    </div>
    
    <div id="signupAdvertisement" class="advertisement">
        <p>Do you want to use your own recipes?</p>
        <p><input id="signup" type="button" value="Signup to use your own recipes"/></p>
    </div>
    <script>
    	var memberUUID = Cookies.get('member_uuid') ;
    	
    	if (memberUUID != null) {
        	$.ajax({
		        url: "http://localhost:8080/member/" + memberUUID,
		        method: "GET",
		        dataType: "json",
		        contentType: "application/json"
		    }).done(function(msg){
		    	if (msg['activeMember'] == false)
		    		$('#signupAdvertisement').show() ;
		    	else
		    		$('#signupAdvertisement').hide() ;
		    });
    	} else
    		$('#signupAdvertisement').show() ;
    </script>

    
    <div class="recipeSelectionArea">
        <div id="search">
            <div class="actions">
                <div>
                    <input id="newRecipe" type="button" value="New Recipe"/>
                    <script th:inline="javascript">
                    	if (memberUUID == null)
                    		$('#newRecipe').hide();
                    
                        $('#newRecipe').click(function(){
                            $('#searchResultList').hide();
                            
                            var snippetPath = '/snippets/recipeEditor.html' ;
                            $('#recipeEditor').load(snippetPath);
                        });
                    </script>
                </div>
                <div>
                    <input id="searchTerm" type="text" placeholder="Search for an ingredient" size="40"/>
                    <input id="searchForRecipe" type="button" value="Search"/>
                </div>
            </div>

            <ul id="searchResultList">
            </ul>
            
            <div id="recipeEditor"></div>

        </div>

        <div id="pick">
            <div class="actions">
                <span>Pick List</span>
            </div>
            <div id="pickList">
                <div class="recipe">
                    <div>
                        <img src="http://placehold.it/50x50"/>
                    </div>
                    <div>
                        <p class="title">Egg-Asparagus</p>
                        <p class="description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec est lectus, ullamcorper at odio et, consectetur tempor est. Pellentesque sed diam nisi. Morbi pellentesque rhoncus ultrices.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
	<script src="/js/main.js"></script>
    <script>
        $('#searchForRecipe').click(function(){
            $.ajax({
                url: "http://localhost:8080/recipe/search?term=" + $('#searchTerm').val(),
                method: "GET",
                dataType: "json"
            }).done(function(msg){
                $('#searchResultList').empty();
                if (msg.length == 0)
                    $('#searchResultList').append('<LI>No recipes were found</LI>')
                    
                $.each(msg, function(index, value){
                    $('#searchResultList').append('<div class="recipe"><div><img src="http://placehold.it/50x50"/></div><div><p class="">' + value['name'] + '</p><p class="description">' + value['description'] + '</p></div></div>');
                });
                
                $('#searchTerm').val('');
            });
        });
    </script>
</body>
</html>
 